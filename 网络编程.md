# 关于网络编程的学习

自动开始java编程设计之后，对网络的涉及也逐步深入。现在需要实现一个TCP/IP协议的访问接口，从java的socket编程开始起步。
本文基于网络调试环境为：windows 10 x64

## 1 学习手段：网络抓包
因为网络环境复杂，需要一个非常趁手的工具来帮助我们进行实验测试，目前选择的方式就是使用网络抓包的方式来对具体协议进行分析。
采用的主要工具为wireshark，这是一个基于Qt的跨平台sniffer软件，支持非常丰富的功能，并且开源免费，是一个非常成熟的工具。他的跨平台主要是通过调用

### 1.1 WireShark基本过滤规则：
使用wireshark的时候，最基本的是要熟悉这个工具提供的过滤规则，通过过滤规则的设置可以从复杂的网络嗅探结果中初步过滤我们想要的结果，然后方便后续深入分析。


### 1.2 windows下的本地回环抓包方式：
在windows下本地回环不经过网卡，wireshark默认需要安装的wincap不能支持，所以需要使用替换软件进行抓包。
Npcap是一个windows下的libpcap库，用于给wireshark在windows环境下提供支持：
```shell
NPcap is the Windows version of the libpcap library; it includes a driver to support capturing packets. 
```
[https://nmap.org/npcap/](https://github.com/nmap/npcap)给出的说明：
```shell
Npcap is the Nmap Project's packet sniffing library for Windows. It is based on the wonderful Winpcap / Libpcap libraries, but with improved improved speed, portability, security, and efficiency. 
```
安装Npcap首先需要卸载之前已经安装的wincap，然后从[官方下载](https://github.com/nmap/npcap/releases)之后安装。
安装完毕后打开wireshark，就会发现多了一个Npcap Loopback adapter选项，监听这个适配器可以完成对本地回环的测试。

例如调试本地20006端口的TCP/IP访问时，wireshark的过滤器设置为：
```shell
tcp&&ip.addr==127.0.0.1&&tcp.port==20006
```
进行一次TCP/IP访问之后，可以看到wireshark已经捕获到了具体的访问信息，这个时候可以停止捕获，然后将捕获结果导出，用于后续深入分析。

参考文档：
> - 1. [wireshark监听本地localhost/127.0.0.1回环网络](http://blog.techbeta.me/2015/12/wireshark-Loopback/)


## 2 网络协议分析：
通过第一章的内容，我们可以获取基本的网络访问结果。接下来就需要对这个网络嗅探结果进入深入分析，查看对应协议的数据包来进行分析协议，在这个过程中就可以找到我们需要的内容了。

### 2.1 TCP/IP协议：

